<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Ejemplo: Elevaciones a lo largo de una ruta</title>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script src="http://www.google.com/jsapi"></script> 
<script src="http://maps.google.com/maps/api/js?key=AIzaSyAaBo7bx5QaWY44Z4In3u8BNLGJxHiiLzs"></script>
<script>
  var elevator;
  var map;
  var chart;
  var infowindow = new google.maps.InfoWindow();
  var polyline;

  // De Covadonga a Posada de Valde√≥n por Sotres
  var covadonga= new google.maps.LatLng(43.308691, -5.054534);
  var arenas= new google.maps.LatLng(43.302999, -4.817967);
  var sotres= new google.maps.LatLng(43.232599, -4.746943);
  var espinama= new google.maps.LatLng(43.128642, -4.787912);
  var posadaValdeon= new google.maps.LatLng(43.151805, -4.917698);

  var picos = new google.maps.LatLng(43.214208, -4.918079);

  // The following path marks a general path from Mt.
  // Whitney, the highest point in the continental United
  // States to Badwater, Death Vallet, the lowest point.
  var whitney = new google.maps.LatLng(36.578581, -118.291994);
  var lonepine = new google.maps.LatLng(36.606111, -118.062778);
  var owenslake = new google.maps.LatLng(36.433269, -117.950916);
  var beattyjunction = new google.maps.LatLng(36.588056, -116.943056);
  var panamintsprings = new google.maps.LatLng(36.339722, -117.467778);
  var badwater = new google.maps.LatLng(36.23998, -116.83171);
  
  // Load the Visualization API and the columnchart package.
  google.load("visualization", "1", {packages: ["columnchart"]});

  function initMap() {
    var myOptions = {
      zoom: 11,
      center: picos,
      mapTypeId: 'terrain'
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    // Create an ElevationService.
    elevator = new google.maps.ElevationService();

    // Draw the path, using the Visualization API and the Elevation service.
    drawPath();
  }

  function drawPath() {

    // Create a new chart in the elevation_chart DIV.
    chart = new google.visualization.ColumnChart(document.getElementById('elevation_chart'));

    //var path = [ whitney, lonepine, owenslake, panamintsprings, beattyjunction, badwater];
    var path = [ covadonga, arenas, sotres, espinama, posadaValdeon];

    // Create a PathElevationRequest object using this array.
    // Ask for 256 samples along that path.
    var pathRequest = {
      'path': path,
      'samples': 256
    }

    // Initiate the path request.
    elevator.getElevationAlongPath(pathRequest, plotElevation);
  }

  // Takes an array of ElevationResult objects, draws the path on the map
  // and plots the elevation profile on a Visualization API ColumnChart.
  function plotElevation(results, status) {
    if (status == google.maps.ElevationStatus.OK) {
      elevations = results;

      // Extract the elevation samples from the returned results
      // and store them in an array of LatLngs.
      var elevationPath = [];
      for (var i = 0; i < results.length; i++) {
        elevationPath.push(elevations[i].location);
      }

      // Display a polyline of the elevation path.
      var pathOptions = {
        path: elevationPath,
        strokeColor: '#0000CC',
        opacity: 0.4,
        map: map
      }
      polyline = new google.maps.Polyline(pathOptions);

      // Extract the data from which to populate the chart.
      // Because the samples are equidistant, the 'Sample'
      // column here does double duty as distance along the
      // X axis.
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Sample');
      data.addColumn('number', 'Elevation');
      for (var i = 0; i < results.length; i++) {
        data.addRow(['', elevations[i].elevation]);
      }

      // Draw the chart using the data within its DIV. 
      document.getElementById('elevation_chart').style.display = 'block';
      chart.draw(data, {
        width: 800,
        height: 250,
        legend: 'none',
        titleY: 'Elevation (m)'
      });
    }
  }  
</script>
</head>
<body style="margin:0px; padding:0px;" onload="initMap();">
<div>
  <div id="map_canvas" style="position:relative; width: 800px;; height:500px; border: 1px solid black;"></div>
  <div id="elevation_chart" style="width:800px; height:250px; "></div>
</div>
</body>
</html>
