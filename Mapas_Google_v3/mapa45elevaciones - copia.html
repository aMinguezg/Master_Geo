<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Ejemplo: Servicio de elevaciones</title>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script async defer
src="https://maps.googleapis.com/maps/api/js?callback=initMap">
</script>
<script>
  var elevator;
  var map;
  var infowindow = new google.maps.InfoWindow();
  var denali = new google.maps.LatLng(43.308824, -5.055321);

  function initMap() {
    var myOptions = {
      zoom: 10,
      center: denali,
      mapTypeId: 'terrain'
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    // Create an ElevationService
    elevator = new google.maps.ElevationService();

    // Add a listener for the click event and call getElevation on that location
    google.maps.event.addListener(map, 'click', getElevation);
  }

  function getElevation(event) {

    var locations = [];

    // Retrieve the clicked location and push it on the array
    var clickedLocation = event.latLng;
    locations.push(clickedLocation);

    // Create a LocationElevationRequest object using the array's one value
    var positionalRequest = {
      'locations': locations
    }

    // Initiate the location request
    elevator.getElevationForLocations(positionalRequest, function(results, status) {
      if (status == google.maps.ElevationStatus.OK) {

        // Retrieve the first result
        if (results[0]) {

          // Open an info window indicating the elevation at the clicked position
          infowindow.setContent("La elevación en este punto es de <br/> " + results[0].elevation + " metros.");
          infowindow.setPosition(clickedLocation);
          infowindow.open(map);
        } else {
          alert("No se han encontrado resultados");
        }
      } else {
        alert("El servicio de elevación ha fallado debido a: " + status);
      }
    });
  }
</script>
</head>
<body>
<div id="map_canvas" style="width: 100%; height: 100%; float:left; border: 1px solid black;"></div>
</body>
</html>
