<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>Ejemplo API Google Maps v3: Mapa control con estado</title>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?callback=initMap">
    </script>
    <script>
	var map;
	var oviedo = new google.maps.LatLng(43.354810,-5.851805);

	/**
	* El control inicio añade un control al mapa que permite
	* llevar al usuario a la situación geográfica definida como inicio
	*/

	// Define una propiedad para mantener el estado del control
	HomeControl.prototype.home_ = null;

	// funciones para obtener y cambiar el valor de la propiedad
	HomeControl.prototype.getHome = function() {
	return this.home_;
	}

	HomeControl.prototype.setHome = function(home) {
	this.home_ = home;
	}

	function HomeControl(controlDiv, map, home) {

		// Inicializamos la variable para el control
		// más tarde añadiremos un receptor (listener) del evento
		var control = this;

		// Establecemos la propiedad
		control.home_ = home;

		// Establece estilos de la página (CSS) para el marco (DIV)
		// que contiene el control, el padding permite separarlo del
		// borde del mapa
		controlDiv.style.padding = '5px';

		// Establece estilos del borde
		var goHomeUI = document.createElement('DIV'); 
		goHomeUI.style.backgroundColor = 'white';
		goHomeUI.style.borderStyle = 'solid';
		goHomeUI.style.borderWidth = '2px';
		goHomeUI.style.cursor = 'pointer';
		goHomeUI.style.textAlign = 'center';
		goHomeUI.title = 'Click to set the map to Home';
		controlDiv.appendChild(goHomeUI);

		// Establece estilos del relleno
		var goHomeText = document.createElement('DIV');
		goHomeText.style.fontFamily = 'Arial,sans-serif';
		goHomeText.style.fontSize = '12px';
		goHomeText.style.paddingLeft = '4px';
		goHomeText.style.paddingRight = '4px';
		goHomeText.innerHTML = '<b>Ir a inicio</b>';
		goHomeUI.appendChild(goHomeText);

		// Establece el borde de FijarInicio
		var setHomeUI = document.createElement('DIV');
		setHomeUI.style.backgroundColor = 'white';
		setHomeUI.style.borderStyle = 'solid';
		setHomeUI.style.borderWidth = '2px';
		setHomeUI.style.cursor = 'pointer';
		setHomeUI.style.textAlign = 'center';
		setHomeUI.title = 'Pulsar para establecer el inicio en el centro del mapa actual';
		controlDiv.appendChild(setHomeUI);

		// Establece estilos para el interior del control
		var setHomeText = document.createElement('DIV');
		setHomeText.style.fontFamily = 'Arial,sans-serif';
		setHomeText.style.fontSize = '12px';
		setHomeText.style.paddingLeft = '4px';
		setHomeText.style.paddingRight = '4px';
		setHomeText.innerHTML = '<b>Fijar inicio</b>';
		setHomeUI.appendChild(setHomeText);

		// Establece el receptor del evento para Inicio
		// Establece el centro del mapa al valor actual de inicio
		google.maps.event.addDomListener(goHomeUI, 'click', function() {
			var currentHome = control.getHome();
			map.setCenter(currentHome);
		});

		// Establece el evento click para Fijar el inicio
		// Establece el inicio al valor actual del centro del mapa
		google.maps.event.addDomListener(setHomeUI, 'click', function() {
			var newHome = map.getCenter();
			control.setHome(newHome);
		});
	}

	function initMap() {
		var mapDiv = document.getElementById('marco_mapa');
		var myOptions = {
			zoom: 12,
			center: oviedo,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		}
	map = new google.maps.Map(mapDiv, myOptions);

	// Crea un DIV para alojar el control y
	// llama a HomeControl() pasando este DIV
	var homeControlDiv = document.createElement('DIV');
	var homeControl = new HomeControl(homeControlDiv, map, oviedo);

	homeControlDiv.index = 1;
	map.controls[google.maps.ControlPosition.TOP_RIGHT].push(homeControlDiv);
	}
    </script>
  </head>
  <body>
    <div id="marco_mapa" style="width:100%; height:100%"></div>
  </body>
</html>