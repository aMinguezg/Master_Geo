<!DOCTYPE html>
<html>
  <head>
	<title>Eventos de usuario asociaci�n var - Ejemplo del API JavaScript de Google Maps v3</title>
    <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map_frame { height: 100%; }
    </style>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?callback=initMap&key=AIzaSyAaBo7bx5QaWY44Z4In3u8BNLGJxHiiLzs">
    </script>
    <script type="text/javascript">
	var map;
	function initMap() {
		var oviedo_eii = new google.maps.LatLng(43.354810,-5.851805);
		var misOpciones = {
			center: oviedo_eii,
			zoom: 14,
			mapTypeId: google.maps.MapTypeId.ROADMAP,
			disableDefaultUI: true
		};
		map = new google.maps.Map(document.getElementById("map_frame"), misOpciones);

		// A�adir 5 marcadores en localizaciones aleatorias del mapa
		// Define esquinas opuestas rect�ngulo
		var suroeste = new google.maps.LatLng(43.352, -5.856);
		new google.maps.Marker({
				position: suroeste, 
				title: 'suroeste',
				map: map
			});
		var noreste = new google.maps.LatLng(43.361, -5.848);
		new google.maps.Marker({
				position: noreste, 
				title: 'noreste',
				map: map
			});
		var bounds = new google.maps.LatLngBounds(suroeste,noreste);
		map.fitBounds(bounds);
		
		var lngSpan = noreste.lng() - suroeste.lng();
		var latSpan = noreste.lat() - suroeste.lat();
		for (var i = 0; i < 5; i++) {
			var location = new google.maps.LatLng(suroeste.lat() + latSpan * Math.random(),
				suroeste.lng() + lngSpan * Math.random());
			var marker = new google.maps.Marker({
				position: location, 
				map: map
			});
			var j = i + 1;
			marker.setTitle(j.toString());
			attachSecretMessage(marker, i);
		}
	}

	// Los cinco marcadores muestran el mensaje secreto cuand se pulsan
	// pero el mensaje no est� dentro de los datos de la instancia de marcador
	function attachSecretMessage(marker, number) {
		var message = ["Este","es","el","mensaje","secreto"];
		var infowindow = new google.maps.InfoWindow(
			{ content: message[number]
			});
		google.maps.event.addListener(marker, 'click', function() {
			infowindow.open(map,marker);
		});
	}
	    </script>
  </head>

  <body>
    <div id="map_frame"></div>
  </body>
</html>